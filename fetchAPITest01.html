<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      table {
        border-collapse: collapse;
      }
      td,
      th {
        border: 1px solid #aaa;
        padding: 8px 10px;
      }
    </style>
    <title>fetch API</title>
  </head>
  <body>
    <script>
      fetch("https://jsonplaceholder.typicode.com/posts")
        .then((response) => {
          return response.json();
        })
        .then((data) => {
          console.log("데이터1:", data);
        });

      const getData = async () => {
        try {
          const response = await fetch(
            "https://jsonplaceholder.typicode.com/posts"
          );
          //테스트 api 서버에 데이터 요청 -> 비동기
          const data = await response.json();
          //받아온 json 데이터를 자바스크립트 객체 배열로 변환
          console.log("데이터2:", data.slice(0, 10));
          //콘솔 데이터 중 10개만 출력
          const tbody = document.querySelector("#fetchTable tbody");
          //html <body>내의 <table id="fetchTable"> 불러오기
          data.slice(0, 10).foreach((items) => {
            const row = document.createElement("tr");
            const column = document.createElement("td");
            idCell.textContent = items.id;
            row.appendChild(idCell);

            const titleCell = document.createElement("td");
            titleCell.textContent = items.title;
            row.appendChild(titleCell);

            const bodyCell = document.createElement("td");
            bodyCell.textContent = items.title;
            row.appendChild(bodyCell);

            tbody.appendChild(row);
          });
        } catch (error) {
          console.log(error.message);
        }
      };
      document.addEventListener("DOMContentLoaded", () => {
        getData();
      });
      //DOM이 다 준비되면 getData() 함수를 실행하라는 뜻;
    </script>
    <body>
      <table id="fetchTable">
        <thead>
          <tr>
            <th>ID</th>
            <th>TITLE</th>
            <th>BODY</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </body>
  </body>
</html>
